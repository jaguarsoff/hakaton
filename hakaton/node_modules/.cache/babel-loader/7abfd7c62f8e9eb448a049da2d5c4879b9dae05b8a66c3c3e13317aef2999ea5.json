{"ast":null,"code":"import{useEffect,useState}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import Cookies from'js-cookie';import{jwtDecode}from'jwt-decode';// Ваши компоненты\nimport Landing from'./Landing';import Register from'./Panel/register';import Login from'./Panel/login';import Panel from'./Panel';import Profile from'./Panel/Profile';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[isLoggedIn,setIsLoggedIn]=useState(true);// !value\nuseEffect(()=>{const authToken=Cookies.get('authToken');if(authToken){try{// Декодируем токен, чтобы получить информацию\nconst decodedToken=jwtDecode(authToken);// Проверяем, что токен не истек\nconst currentTime=Date.now()/1000;if(decodedToken.exp>currentTime){setIsLoggedIn(true);}else{// Токен истек, удаляем его из кук и считаем пользователя не аутентифицированным\nCookies.remove('authToken');setIsLoggedIn(false);}}catch(error){console.error('Ошибка при декодировании токена:',error);setIsLoggedIn(false);}}else{setIsLoggedIn(false);// !value\n}},[]);return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:isLoggedIn?/*#__PURE__*/_jsx(Panel,{}):/*#__PURE__*/_jsx(Landing,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/panel\",element:isLoggedIn?/*#__PURE__*/_jsx(Panel,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/\"})}),/*#__PURE__*/_jsx(Route,{path:\"/panel/profile/:login\",element:isLoggedIn?/*#__PURE__*/_jsx(Profile,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/\"})})]})});}export default App;","map":{"version":3,"names":["useEffect","useState","BrowserRouter","Router","Routes","Route","Navigate","Cookies","jwtDecode","Landing","Register","Login","Panel","Profile","jsx","_jsx","jsxs","_jsxs","App","isLoggedIn","setIsLoggedIn","authToken","get","decodedToken","currentTime","Date","now","exp","remove","error","console","children","path","element","to"],"sources":["C:/OSPanel/domains/localhost/hakaton/src/components/App.js"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\r\nimport Cookies from 'js-cookie';\r\nimport {jwtDecode} from 'jwt-decode';\r\n\r\n// Ваши компоненты\r\nimport Landing from './Landing';\r\nimport Register from './Panel/register';\r\nimport Login from './Panel/login';\r\nimport Panel from './Panel';\r\nimport Profile from './Panel/Profile';\r\nfunction App() {\r\n  const [isLoggedIn, setIsLoggedIn] = useState(true); // !value\r\n\r\n  useEffect(() => {\r\n    const authToken = Cookies.get('authToken');\r\n\r\n    if (authToken) {\r\n      try {\r\n        // Декодируем токен, чтобы получить информацию\r\n        const decodedToken = jwtDecode(authToken);\r\n\r\n        // Проверяем, что токен не истек\r\n        const currentTime = Date.now() / 1000;\r\n        if (decodedToken.exp > currentTime) {\r\n          setIsLoggedIn(true);\r\n        } else {\r\n          // Токен истек, удаляем его из кук и считаем пользователя не аутентифицированным\r\n          Cookies.remove('authToken');\r\n          setIsLoggedIn(false);\r\n        }\r\n      } catch (error) {\r\n        console.error('Ошибка при декодировании токена:', error);\r\n        setIsLoggedIn(false);\r\n      }\r\n    } else {\r\n      setIsLoggedIn(false); // !value\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <Router>\r\n      <Routes>\r\n        <Route path=\"/\" element={isLoggedIn ? <Panel /> : <Landing/>} />\r\n        <Route path=\"/register\" element={<Register />} />\r\n        <Route path=\"/login\" element={<Login />} />\r\n        <Route path=\"/panel\" element={isLoggedIn ? <Panel /> : <Navigate to=\"/\" />} />\r\n        <Route path=\"/panel/profile/:login\" element={isLoggedIn ? <Profile /> : <Navigate to=\"/\" />} />\r\n      </Routes>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"AAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,aAAa,GAAI,CAAAC,MAAM,CAAEC,MAAM,CAAEC,KAAK,CAAEC,QAAQ,KAAQ,kBAAkB,CACnF,MAAO,CAAAC,OAAO,KAAM,WAAW,CAC/B,OAAQC,SAAS,KAAO,YAAY,CAEpC;AACA,MAAO,CAAAC,OAAO,KAAM,WAAW,CAC/B,MAAO,CAAAC,QAAQ,KAAM,kBAAkB,CACvC,MAAO,CAAAC,KAAK,KAAM,eAAe,CACjC,MAAO,CAAAC,KAAK,KAAM,SAAS,CAC3B,MAAO,CAAAC,OAAO,KAAM,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBACtC,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAGnB,QAAQ,CAAC,IAAI,CAAC,CAAE;AAEpDD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAqB,SAAS,CAAGd,OAAO,CAACe,GAAG,CAAC,WAAW,CAAC,CAE1C,GAAID,SAAS,CAAE,CACb,GAAI,CACF;AACA,KAAM,CAAAE,YAAY,CAAGf,SAAS,CAACa,SAAS,CAAC,CAEzC;AACA,KAAM,CAAAG,WAAW,CAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAG,IAAI,CACrC,GAAIH,YAAY,CAACI,GAAG,CAAGH,WAAW,CAAE,CAClCJ,aAAa,CAAC,IAAI,CAAC,CACrB,CAAC,IAAM,CACL;AACAb,OAAO,CAACqB,MAAM,CAAC,WAAW,CAAC,CAC3BR,aAAa,CAAC,KAAK,CAAC,CACtB,CACF,CAAE,MAAOS,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,kCAAkC,CAAEA,KAAK,CAAC,CACxDT,aAAa,CAAC,KAAK,CAAC,CACtB,CACF,CAAC,IAAM,CACLA,aAAa,CAAC,KAAK,CAAC,CAAE;AACxB,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEL,IAAA,CAACZ,MAAM,EAAA4B,QAAA,cACLd,KAAA,CAACb,MAAM,EAAA2B,QAAA,eACLhB,IAAA,CAACV,KAAK,EAAC2B,IAAI,CAAC,GAAG,CAACC,OAAO,CAAEd,UAAU,cAAGJ,IAAA,CAACH,KAAK,GAAE,CAAC,cAAGG,IAAA,CAACN,OAAO,GAAC,CAAE,CAAE,CAAC,cAChEM,IAAA,CAACV,KAAK,EAAC2B,IAAI,CAAC,WAAW,CAACC,OAAO,cAAElB,IAAA,CAACL,QAAQ,GAAE,CAAE,CAAE,CAAC,cACjDK,IAAA,CAACV,KAAK,EAAC2B,IAAI,CAAC,QAAQ,CAACC,OAAO,cAAElB,IAAA,CAACJ,KAAK,GAAE,CAAE,CAAE,CAAC,cAC3CI,IAAA,CAACV,KAAK,EAAC2B,IAAI,CAAC,QAAQ,CAACC,OAAO,CAAEd,UAAU,cAAGJ,IAAA,CAACH,KAAK,GAAE,CAAC,cAAGG,IAAA,CAACT,QAAQ,EAAC4B,EAAE,CAAC,GAAG,CAAE,CAAE,CAAE,CAAC,cAC9EnB,IAAA,CAACV,KAAK,EAAC2B,IAAI,CAAC,uBAAuB,CAACC,OAAO,CAAEd,UAAU,cAAGJ,IAAA,CAACF,OAAO,GAAE,CAAC,cAAGE,IAAA,CAACT,QAAQ,EAAC4B,EAAE,CAAC,GAAG,CAAE,CAAE,CAAE,CAAC,EACzF,CAAC,CACH,CAAC,CAEb,CAEA,cAAe,CAAAhB,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}