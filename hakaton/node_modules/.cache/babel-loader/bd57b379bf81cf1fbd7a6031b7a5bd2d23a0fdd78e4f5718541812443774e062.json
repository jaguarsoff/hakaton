{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Panel(){const[userInfo,setUserInfo]=useState(null);useEffect(()=>{// Get the JWT token from cookies\nconst authToken=document.cookie.replace(/(?:(?:^|.*;\\s*)authToken\\s*=\\s*([^;]*).*$)|^.*$/,'$1');if(authToken){// Make a fetch request to your PHP endpoint to get user data based on the JWT token\nfetch('user/info.php',{headers:{Authorization:\"Bearer \".concat(authToken)}}).then(response=>response.json()).then(data=>{// Set the user information based on the response\nsetUserInfo(data.user);}).catch(error=>console.error('Error fetching user data:',error));}},[]);function exit(){document.cookie=\"authToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";window.location.reload();}return/*#__PURE__*/_jsxs(\"div\",{className:\"panel\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u041F\\u0430\\u043D\\u0435\\u043B\\u044C \\u0443\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u044F\"}),userInfo&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u041B\\u043E\\u0433\\u0438\\u043D: \",userInfo.login]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u0414\\u0430\\u0442\\u0430 \\u0441\\u043E\\u0437\\u0434\\u0430\\u043D\\u0438\\u044F: \",userInfo.created_at]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:exit,children:\"\\u0412\\u044B\\u0439\\u0442\\u0438\"})]});}export default Panel;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Panel","userInfo","setUserInfo","authToken","document","cookie","replace","fetch","headers","Authorization","concat","then","response","json","data","user","catch","error","console","exit","window","location","reload","className","children","login","created_at","onClick"],"sources":["C:/OSPanel/domains/localhost/hakaton/src/components/Panel.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nfunction Panel() {\r\n    const [userInfo, setUserInfo] = useState(null);\r\n\r\n    useEffect(() => {\r\n        // Get the JWT token from cookies\r\n        const authToken = document.cookie.replace(/(?:(?:^|.*;\\s*)authToken\\s*=\\s*([^;]*).*$)|^.*$/, '$1');\r\n\r\n        if (authToken) {\r\n            // Make a fetch request to your PHP endpoint to get user data based on the JWT token\r\n            fetch('user/info.php', {\r\n                headers: {\r\n                    Authorization: `Bearer ${authToken}`,\r\n                },\r\n            })\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    // Set the user information based on the response\r\n                    setUserInfo(data.user);\r\n                })\r\n                .catch(error => console.error('Error fetching user data:', error));\r\n        }\r\n    }, []);\r\n\r\n    function exit() {\r\n        document.cookie = `authToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;\r\n        window.location.reload();\r\n    }\r\n\r\n    return (\r\n        <div className=\"panel\">\r\n            <h1>Панель управления</h1>\r\n            {userInfo && (\r\n                <div>\r\n                    <span>Логин: {userInfo.login}</span>\r\n                    <span>Дата создания: {userInfo.created_at}</span>\r\n                </div>\r\n            )}\r\n            <button onClick={exit}>Выйти</button>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Panel;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEnD,QAAS,CAAAC,KAAKA,CAAA,CAAG,CACb,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGR,QAAQ,CAAC,IAAI,CAAC,CAE9CC,SAAS,CAAC,IAAM,CACZ;AACA,KAAM,CAAAQ,SAAS,CAAGC,QAAQ,CAACC,MAAM,CAACC,OAAO,CAAC,iDAAiD,CAAE,IAAI,CAAC,CAElG,GAAIH,SAAS,CAAE,CACX;AACAI,KAAK,CAAC,eAAe,CAAE,CACnBC,OAAO,CAAE,CACLC,aAAa,WAAAC,MAAA,CAAYP,SAAS,CACtC,CACJ,CAAC,CAAC,CACGQ,IAAI,CAACC,QAAQ,EAAIA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACjCF,IAAI,CAACG,IAAI,EAAI,CACV;AACAZ,WAAW,CAACY,IAAI,CAACC,IAAI,CAAC,CAC1B,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,EAAIC,OAAO,CAACD,KAAK,CAAC,2BAA2B,CAAEA,KAAK,CAAC,CAAC,CAC1E,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN,QAAS,CAAAE,IAAIA,CAAA,CAAG,CACZf,QAAQ,CAACC,MAAM,6DAA+D,CAC9Ee,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC,CAC5B,CAEA,mBACIvB,KAAA,QAAKwB,SAAS,CAAC,OAAO,CAAAC,QAAA,eAClB3B,IAAA,OAAA2B,QAAA,CAAI,mGAAiB,CAAI,CAAC,CACzBvB,QAAQ,eACLF,KAAA,QAAAyB,QAAA,eACIzB,KAAA,SAAAyB,QAAA,EAAM,kCAAO,CAACvB,QAAQ,CAACwB,KAAK,EAAO,CAAC,cACpC1B,KAAA,SAAAyB,QAAA,EAAM,6EAAe,CAACvB,QAAQ,CAACyB,UAAU,EAAO,CAAC,EAChD,CACR,cACD7B,IAAA,WAAQ8B,OAAO,CAAER,IAAK,CAAAK,QAAA,CAAC,gCAAK,CAAQ,CAAC,EACpC,CAAC,CAEd,CAEA,cAAe,CAAAxB,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}